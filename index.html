<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inesh Kumar — Journey</title>
  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu, sans-serif;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 24px;
    }

    .card {
      background: rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 24px;
      max-width: 1100px;
      width: 100%;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.45);
      display: flex;
      gap: 20px;
      align-items: flex-start;
    }

    /* Left news panel */
    .news {
      width: 260px;
      min-width: 220px;
      background: rgba(255,255,255,0.03);
      border-radius: 12px;
      padding: 14px;
      border: 1px solid rgba(255,255,255,0.04);
    }

    .profile-photo { display:block; width:84px; height:84px; border-radius:50%; object-fit:cover; margin:6px auto 12px; border:2px solid rgba(255,255,255,0.06); }
    .news-name { text-align:center; font-weight:700; margin-bottom:8px; }

    .news h3 { margin: 0 0 8px; font-size: 1.05rem; }
    .news-item { font-size: 0.92rem; color: #d7e3ee; margin-bottom: 10px; }
    .news-item small { display:block; color:#9fb0bf; margin-top:4px; }

    /* Main content area */
    .main { flex:1; }

    header {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      margin-bottom: 12px;
    }

    h1 { margin: 0; font-size: 1.4rem; }
    .intro { color: #d0d7de; margin-top:6px; margin-bottom: 6px; }

    .links a { display:inline-block; margin-left:10px; padding:6px 10px; border-radius:999px; text-decoration:none; color:#fff; border:1px solid rgba(255,255,255,0.12); font-size:0.88rem; }
    .links a:hover { background:#fff; color:#0f2027; }

    /* Ensure links are shown in a row and aligned */
    .links { display:flex; gap:8px; align-items:center; }
    .links a { margin-left:0; }

    /* Journey timeline */
    .year-group { margin-bottom: 12px; border-radius:8px; overflow:hidden; }
    .year-header { display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px 12px; background: rgba(255,255,255,0.02); cursor:pointer; border:1px solid rgba(255,255,255,0.02); }
    .year-header:hover { background: rgba(255,255,255,0.03); }
    .year-title { font-size:1.05rem; font-weight:700; }
    .toggle-indicator { transition: transform 0.18s ease; color:#aab2bd; }
    .year-group.open .toggle-indicator { transform: rotate(180deg); }

    .posts { display:none; padding:10px 12px 12px 12px; }
    .year-group.open .posts { display:block; }

    .post-item { background: rgba(255,255,255,0.03); padding:10px 12px; border-radius:8px; margin-top:8px; cursor:pointer; border:1px solid rgba(255,255,255,0.03); }
    .post-item:hover { transform: translateY(-3px); background: rgba(255,255,255,0.035); }
    .post-title { font-weight:600; }
    .post-summary { color:#bfcbd6; font-size:0.92rem; margin-top:6px; }

    footer { margin-top: 10px; font-size: 0.85rem; color: #aab2bd; text-align:center; }

    /* Modal styles */
    .modal { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(0,0,0,0.6); z-index: 50; padding: 20px; }
    .modal.open { display:flex; }
    .modal-card { background:#0f1720; color:#e6eef6; max-width:860px; width:100%; max-height:86vh; overflow:auto; border-radius:12px; padding:18px; box-shadow:0 12px 40px rgba(0,0,0,0.6); }
    .modal-header { display:flex; align-items:center; justify-content:space-between; gap:12px; }
    .close-btn { background:transparent; border:1px solid rgba(255,255,255,0.08); color:#fff; padding:6px 10px; border-radius:8px; cursor:pointer; }

    /* README preview styling (scoped inside modal) */
    .readme-wrapper { background: #ffffff; color: #0f1720; border-radius: 8px; padding: 16px; line-height: 1.6; }
    .readme-wrapper h1, .readme-wrapper h2, .readme-wrapper h3 { color: #0b2540; font-weight:800; }
    .readme-wrapper h1 { font-size: 1.8rem; margin-top: 0; }
    .readme-wrapper h2 { font-size: 1.4rem; }
    .readme-wrapper p { color: #123; }
    .readme-wrapper img { max-width: 100%; height: auto; border-radius:6px; margin:10px 0; display:block; }
    .readme-wrapper pre { background:#f3f4f6; color:#111; padding:10px; border-radius:6px; overflow:auto; }
    .readme-wrapper code { background:#f3f4f6; color:#111; padding:2px 6px; border-radius:4px; }

    @media (max-width:900px){
      .card { flex-direction:column; }
      .news { width:100%; }
    }
  </style>
</head>
<body>
  <div class="card">
    <aside class="news" aria-label="Latest news">
      <!-- Add your photo at the top. Place a file named "Inesh_kumar.jpeg" next to index.html or update the src accordingly. -->
      <img src="Inesh_kumar.jpeg" alt="Inesh Kumar" class="profile-photo" />
      <div class="news-name">Inesh Kumar</div>

      <h3>Latest News</h3>
      <div class="news-item">
        Kubernetes 1.30 released — improved scheduler performance.
        <small>Jan 2026</small>
      </div>
      <div class="news-item">
        Terraform 1.9 introduces finer drift detection.
        <small>Dec 2025</small>
      </div>
      <div class="news-item">
        Major enhancements to managed Prometheus offerings.
        <small>Oct 2025</small>
      </div>
      <div style="margin-top:8px; font-size:0.85rem; color:#b9c8d6;">This panel will host curated links and short notes about noteworthy changes in DevOps & Cloud.</div>
    </aside>

    <main class="main">
      <header>
        <div>
          <h1>Inesh Kumar — Journey (2015 → 2026)</h1>
          <div class="intro">A chronological collection of short posts describing real issues, how they were diagnosed and resolved across 7+ years.</div>
        </div>

        <nav class="links">
          <a href="inesh_resume.pdf" target="_blank">Resume</a>
          <a href="https://www.linkedin.com/" target="_blank">LinkedIn</a>
        </nav>
      </header>

      <section id="journey">
        <!-- Year groups rendered by script -->
      </section>

      <footer>
        © <span id="year"></span> Inesh Kumar
      </footer>
    </main>
  </div>

  <!-- Modal: view post -->
  <div id="modal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-card">
      <div class="modal-header">
        <strong id="modal-title">Post</strong>
        <div>
          <button id="open-full" class="close-btn" style="margin-right:8px;">Open full page</button>
          <button id="close-modal" class="close-btn">Close</button>
        </div>
      </div>
      <div id="modal-body" style="margin-top:12px;">
        <div style="color:#aab2bd; font-size:0.9rem; margin-bottom:8px;" id="view-meta"></div>
        <div id="view-content"></div>
      </div>
    </div>
  </div>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Static posts — keep only 2026 for now (UI simplified per request)
    const posts = [
      { id:'post-2026', date: '2026-01-05', title: '2026 — Observability-first deployments', summary: 'Adopted end-to-end tracing and SLO-based deploy gates.', content: '# Observability-first deployments\nAdopted end-to-end tracing and SLO-based deploy gates.\n\n- Standardized tracing libraries\n- Gate deployments with SLOs\n' }
    ];

    // Group posts by year descending
    function renderJourney(){
      const container = document.getElementById('journey');
      container.innerHTML = '';
      // sort posts by date desc
      const sorted = posts.slice().sort((a,b) => (b.date || '').localeCompare(a.date || ''));
      const groups = {};
      sorted.forEach(p => {
        const year = (p.date || '').slice(0,4) || 'Unknown';
        groups[year] = groups[year] || [];
        groups[year].push(p);
      });

      // years sorted desc (2026 first)
      const years = Object.keys(groups).sort((a,b) => b.localeCompare(a));
      const latestYear = years[0];
      years.forEach(year => {
        const grp = document.createElement('div');
        grp.className = 'year-group';
        // header with toggle indicator
        grp.innerHTML = `<div class="year-header" role="button" aria-expanded="false"><div class="year-title">${year}</div><div class="toggle-indicator">▾</div></div>`;

        const postsContainer = document.createElement('div');
        postsContainer.className = 'posts';

        groups[year].forEach(p => {
          const item = document.createElement('div');
          item.className = 'post-item';
          item.setAttribute('tabindex','0');
          item.innerHTML = `<div class="post-title">${escapeHtml(p.title)}</div><div class="post-summary">${escapeHtml(p.summary)}</div>`;
          item.addEventListener('click', ()=> openPost(p.id));
          item.addEventListener('keypress', (e)=>{ if(e.key === 'Enter') openPost(p.id); });
          postsContainer.appendChild(item);
        });

        // Attempt to load year README from year-drafts (so edits to README.md are visible)
        // Note: this works when files are served over HTTP (e.g., GitHub Pages or a local server). File:// may block fetch.
        (function(){
          const readmePath = `./year-drafts/${year}/README.md`;
          fetch(readmePath).then(res => {
            if(!res.ok) throw new Error('not found');
            return res.text();
          }).then(md => {
            const draftItem = document.createElement('div');
            draftItem.className = 'post-item';
            draftItem.setAttribute('tabindex','0');
            draftItem.innerHTML = `<div class="post-title">Drafts for ${year}</div><div class="post-summary">Open year drafts (README.md)</div>`;
            draftItem.addEventListener('click', ()=>{
              document.getElementById('modal-title').textContent = `${year} — Drafts`;
              document.getElementById('view-meta').textContent = '';
              // wrap README content in a white "readme-wrapper" so screenshots and code blocks are readable
              document.getElementById('view-content').innerHTML = '<div class="readme-wrapper">' + markdownToHtml(md || '') + '</div>';
              document.getElementById('modal').classList.add('open');
            });
            draftItem.addEventListener('keypress', (e)=>{ if(e.key === 'Enter') draftItem.click(); });
            // insert at top of posts for the year
            postsContainer.insertBefore(draftItem, postsContainer.firstChild);
          }).catch(()=>{
            // ignore silently — README not present or fetch blocked (file://). If fetch fails due to file://, show a hint button to explain.
            // If running locally via file:// you won't be able to fetch; serve with a local server: `python -m http.server`.
            if(location.protocol === 'file:'){
              const hint = document.createElement('div');
              hint.className = 'post-item';
              hint.style.opacity = '0.85';
              hint.innerHTML = `<div class="post-title">Drafts available in repository</div><div class="post-summary">To preview README.md content here, run a local HTTP server (e.g. \`python -m http.server\`) or publish to GitHub Pages.</div>`;
              postsContainer.insertBefore(hint, postsContainer.firstChild);
            }
          });
        })();

        grp.appendChild(postsContainer);

        // open only the latest year by default
        if(year === latestYear){
          grp.classList.add('open');
          grp.querySelector('.year-header').setAttribute('aria-expanded','true');
        }

        // toggle behavior
        grp.querySelector('.year-header').addEventListener('click', ()=>{
          const open = grp.classList.toggle('open');
          grp.querySelector('.year-header').setAttribute('aria-expanded', open ? 'true' : 'false');
        });

        container.appendChild(grp);
      });
    }

    function openPost(id){
      const post = posts.find(p => p.id === id);
      if(!post) return;
      document.getElementById('modal-title').textContent = post.title;
      document.getElementById('view-meta').textContent = `${post.date || ''} — ${post.summary || ''}`;
      // track current markdown for full-page view
      currentPreviewMarkdown = post.content || '';
      document.getElementById('view-content').innerHTML = '<div class="readme-wrapper">' + markdownToHtml(post.content || '') + '</div>';
      document.getElementById('modal').classList.add('open');
    }

    // track the currently-loaded markdown shown in the modal (for opening full page)
    let currentPreviewMarkdown = '';

    document.getElementById('open-full').addEventListener('click', ()=>{
      if(!currentPreviewMarkdown) return;
      openFullPage(currentPreviewMarkdown, document.getElementById('modal-title').textContent || 'Draft');
    });

    function openFullPage(md, title){
      const w = window.open('', '_blank');
      if(!w) return alert('Popup blocked — allow popups for this site to open full page.');
      const doc = w.document;
      const html = `<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>${escapeHtml(title)}</title><style>body{font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,sans-serif;margin:0;padding:28px;background:#fff;color:#0b2540} .container{max-width:900px;margin:24px auto;padding:28px;border-radius:8px;background:#fff;box-shadow:0 6px 30px rgba(11,37,64,0.06)} h1{font-size:2.2rem;margin-top:0} h2{font-size:1.6rem} pre{background:#f6f7f9;padding:12px;border-radius:6px;overflow:auto} code{background:#f3f4f6;padding:2px 6px;border-radius:4px} img{max-width:100%;height:auto;border-radius:6px} a{color:#0b5cff}</style></head><body><div class="container"><h1>${escapeHtml(title)}</h1>` + markdownToHtml(md) + `</div></body></html>`;
      doc.open(); doc.write(html); doc.close();
    }

    function closeModal(){ document.getElementById('modal').classList.remove('open'); }
    document.getElementById('close-modal').addEventListener('click', closeModal);
    document.getElementById('modal').addEventListener('click', (e)=>{ if(e.target.id === 'modal') closeModal(); });

    // Basic markdown renderer (small)
    function markdownToHtml(md){
      if(!md) return '';
      let out = escapeHtml(md);
      out = out.replace(/```([\s\S]*?)```/g, function(m, code){ return '<pre><code>' + code.replace(/</g,'&lt;') + '</code></pre>'; });
      out = out.replace(/^###### (.*$)/gim, '<h6>$1</h6>');
      out = out.replace(/^##### (.*$)/gim, '<h5>$1</h5>');
      out = out.replace(/^#### (.*$)/gim, '<h4>$1</h4>');
      out = out.replace(/^### (.*$)/gim, '<h3>$1</h3>');
      out = out.replace(/^## (.*$)/gim, '<h2>$1</h2>');
      out = out.replace(/^# (.*$)/gim, '<h1>$1</h1>');
      out = out.replace(/\*\*(.*?)\*\*/gim, '<strong>$1</strong>');
      out = out.replace(/\*(.*?)\*/gim, '<em>$1</em>');
      out = out.replace(/`([^`]+)`/gim, '<code>$1</code>');
      out = out.replace(/\[([^\]]+)\]\(([^)]+)\)/gim, '<a href="$2" target="_blank" rel="noopener">$1</a>');
      out = out.replace(/(^|\n)\s*[-*+] (.+)/gim, function(_, pre, item){ return (pre || '\n') + '<li>' + item + '</li>'; });
      out = out.replace(/(?:<li>[\s\S]+?<\/li>)/g, function(match){ return '<ul>' + match + '</ul>'; });
      out = out.replace(/\n{2,}/g, '</p><p>');
      out = '<p>' + out + '</p>';
      out = out.replace(/<p>\s*(<ul>)/g, '$1').replace(/(<\/ul>)\s*<\/p>/g, '$1');
      return out;
    }

    function escapeHtml(str){
      return String(str)
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#39;');
    }

    renderJourney();

    // Note: To publish permanently, add markdown files under /posts and link from this page or convert this into a static site generator flow.
  </script>
</body>
</html>